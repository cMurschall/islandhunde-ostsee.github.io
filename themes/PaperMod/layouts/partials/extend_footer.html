


<script>
  document.addEventListener("DOMContentLoaded", () => {
    const charts = document.querySelectorAll(".pedigree-chart");
    if (charts.length === 0) return;

    // Dynamically load d3.js and chart code only when needed
    Promise.all([
      loadScript("{{ (resources.Get "js/d3.js" | minify | fingerprint).RelPermalink }}"),
      loadScript("{{ (resources.Get "js/dogPedigreeChart.js" | minify | fingerprint).RelPermalink }}")
    ])
    .then(() => {
      charts.forEach(el => {
        const id = el.dataset.id;
        const file = el.dataset.file;
        fetch(`/data/dogs/${file}.json`)
          .then(r => r.json())
          .then(data => renderDogPedigreeChart(id, data))
          .catch(err => console.error("Pedigree fetch failed:", err));
      });
    });

    function loadScript(src) {
      return new Promise((resolve, reject) => {
        const s = document.createElement("script");
        s.src = src;
        s.defer = true;
        s.onload = resolve;
        s.onerror = () => reject(new Error("Failed to load: " + src));
        document.head.appendChild(s);
      });
    }
  });
</script>




{{ if eq hugo.Environment "development" }}
<script>
  console.log("ðŸš§ Hugo Debug Info:");
  console.log("Layout: {{ .Layout }}");
  console.log("Kind: {{ .Kind }}");
  console.log("Type: {{ .Type }}");
  console.log("Section: {{ .Section }}");
  {{ with .File }}
  console.log("Path: {{ .Path }}");
  {{ else }}
  console.log("Path: (no file - probably taxonomy or term page)");
  {{ end }}
</script>
{{ end }}